---
import type { GetStaticPaths } from "astro";
import Pagination from "components/Pagination.astro";
import PostCard from "components/PostCard.astro";
import FeaturePage from "layouts/FeaturePage.astro";
import { mockPosts, type Post } from "utils/post";

export interface Props {
  // eslint-disable-next-line no-undef
  page: Page<Post>;
}

export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  const posts = mockPosts;
  return paginate(posts, { pageSize: 4 });
};

const { page } = Astro.props;
---

<FeaturePage
  title="Blog"
  description="Show my insights. Share my experience. Record my growth."
>
  <ul
    class="my-6 sm:my-12 sm:pl-4 divide-y divide-slate-300 dark:divide-slate-700 sm:divide-none sm:border-l-2 border-sky-800 dark:border-sky-200 sm:space-y-2"
  >
    {
      page.data.map((post, index) => (
        <li class="animate-drop" style={`animation-delay: ${index * 0.2}s`}>
          <PostCard {...post} />
        </li>
      ))
    }
  </ul>
  <Pagination {...page} />
</FeaturePage>
