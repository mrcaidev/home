---
import type { MarkdownLayoutProps } from "astro";
import PostHead from "components/Head/PostHead.astro";
import { ChevronLeft } from "preact-feather";
import Page from "./Page.astro";

export type Props = MarkdownLayoutProps<Frontmatter>;

const { frontmatter } = Astro.props;
const { title, publishedAt } = frontmatter;
const publishedTime = new Date(publishedAt).toISOString();
---

<Page>
  <PostHead slot="head" {...frontmatter} />
  <main class="max-w-5xl min-h-screen px-8 py-20 mx-auto">
    <a href="/blog" class="hover:text-sky-800 dark:hover:text-sky-200">
      <ChevronLeft size={16} class="inline -translate-y-[1px]" />
      Blog
    </a>
    <article
      class="max-w-none py-8 prose prose-slate dark:prose-invert prose-headings:text-slate-800 dark:prose-headings:text-slate-200 prose-headings:scroll-mt-20 prose-a:text-current hover:prose-a:text-sky-800 dark:hover:prose-a:text-sky-200 prose-a:underline-offset-4 [&_sup_a]:no-underline prose-blockquote:text-slate-600 dark:prose-blockquote:text-slate-400 [&_blockquote_p]:before:content-none [&_blockquote_p]:after:content-none prose-strong:text-sky-800 dark:prose-strong:text-sky-200 prose-img:mx-auto prose-code:text-current"
    >
      <h1 class="leading-snug">{title}</h1>
      <slot />
    </article>
    <hr class="mb-10 border-slate-300 dark:border-slate-700" />
    <div class="flex justify-between items-center gap-8">
      <a href="/blog" class="hover:text-sky-800 dark:hover:text-sky-200">
        <ChevronLeft size={16} class="inline -translate-y-[1px]" />
        Blog
      </a>
      <p class="text-end text-slate-600 dark:text-slate-400">
        Yuwang Cai, <time datetime={publishedTime}>{publishedAt}</time>
      </p>
    </div>
  </main>
</Page>
